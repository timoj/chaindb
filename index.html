<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="src/jsdb.js"></script>
    <title>JSDB test</title>
</head>
<body>
<script>
    JsDb.createTable("Users");
    // JsDb.insert("Users", {name: "User1", age: 21});
    // JsDb.insert("Users", {name: "User2", age: 30});
    var start = performance.now();
    for (var i = 0; i < 1000; i++) {
        _addManyUsersTest(5000, 5000);
    }
    var end = performance.now();
    console.log(end - start);


    // var query = new JsDb.Query();
    // var users = query.select(["*"]).from("Users").whereColumnEquals("name", "User2").getResults();

    query = new JsDb.Query();
    var users = query.select(["*"]).from("Users").whereColumnEquals("age", 21).whereColumnMeets("name", function (name) {
        return name === "User2";
    }).getResults();
    console.log(users);

    console.log(Object.values(JsDb._values['Users']).length);

    query = new JsDb.Query();
    var users = query.select(["*"]).from("Users").whereColumnMeets("age", function (age) {
        return (age >= 20 && age <= 25);
    }).remove();
    console.log(Object.values(JsDb._values['Users']).length);
    // console.log(users);


    function _addManyUsersTest(start, it) {
        JsDb.insert("Users", {name: ("User" + (start % it)), age: Math.floor(Math.random() * 100)});
        if (it > 0) {
            _addManyUsersTest(start, (it - 1));
        }
    }

    function _addManyUsersBulkTest(start, it) {
        insertingUsers.push({name: ("User" + (start % it)), age: Math.floor(Math.random() * 100)});
        if (it > 0) {
            _addManyUsersBulkTest(start, (it - 1));
        }
    }
</script>
</body>
</html>